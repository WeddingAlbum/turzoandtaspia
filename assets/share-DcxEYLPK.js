import{r as a,f as j,j as t,d as P,e as T,F as H,v as b,w as M,x as z,y as A,R as B}from"./index-DumWnZT1.js";function O(){const[w,R]=a.useState(""),[g,f]=a.useState(""),[$,x]=a.useState(""),[k,v]=a.useState(""),[L,E]=a.useState(""),[l,p]=a.useState(!1),[y,S]=a.useState(j),[D,U]=a.useState(window.innerHeight);a.useEffect(()=>{const e=()=>{U(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{async function e(){const s=z;R(s.eventTitle);const i=new URLSearchParams(window.location.search).get("id");if(i)for(let o=0;o<s.events.length;o++){const c=s.events[o],h=s[c];for(let r=0;r<h.length;r++){let n=h[r];if(n.id.slice(-4)==".JPG"){if(i==n.id){p(!0),f(c),x(s.eventData[c].date),v("https://images.pixieset.com/55522446/"+n.id.replace("xxlarge","xlarge"));break}continue}const m=n.width<n.height?"w":"h",u=n.width<n.height?n.width:n.height;if(i==n.id){p(!0),f(c),x(s.eventData[c].date),v(b+n.id+`=${m}${M}`),E(b+n.id+`=${m}${u}`);break}}if(l)break}}e()},[]),a.useEffect(()=>{l?document.title=`${w} - ${g}`:document.title="Image not found"},[l]);const N=()=>{const e=window.location.pathname.split("/"),s="?event="+g.toLowerCase();e.length<=3?e.push(s):(e.length=3,e[e.length-1]==""?e[e.length-2]=s:e[e.length-1]=s);const d=e.join("/").replace("//","/");window.location.href=d},I=async()=>{const e=await fetch(L);if(!e.ok)throw new Error("Image download failed.");const s=await e.blob(),d=URL.createObjectURL(s),i=document.createElement("a");i.href=d;const o=new Date,c=o.getFullYear(),h=String(o.getMonth()+1).padStart(2,"0"),r=String(o.getDate()).padStart(2,"0"),n=String(o.getHours()).padStart(2,"0"),m=String(o.getMinutes()).padStart(2,"0"),u=String(o.getSeconds()).padStart(2,"0"),C=String(o.getMilliseconds()).padStart(3,"0"),F=`${document.title}_${c}${h}${r}${n}${m}${u}${C}.jpg`;i.download=F,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(d)};return t.jsx("div",{className:"share-container",style:{height:`${D}px`},children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text back",onClick:()=>N(),children:"Back to Collection"}),t.jsx("div",{className:"text title",children:w}),t.jsx("div",{className:"text subtitle",children:g}),t.jsx("div",{className:"text subtitle",children:$}),t.jsxs("div",{className:"text download",onClick:e=>{e.stopPropagation(),I(),S(P),setTimeout(()=>{S(j)},T)},children:[t.jsx(H,{icon:y}),t.jsx("div",{children:"Â Download"})]}),t.jsx("div",{className:"image-container",children:t.jsx("img",{src:k,onContextMenu:e=>e.preventDefault()})})]}):t.jsx("div",{className:"not-found-container",children:t.jsx("div",{className:"text not-found-text",children:"Image not found"})})})}A.createRoot(document.getElementById("root")).render(t.jsx(B.StrictMode,{children:t.jsx(O,{})}));
